{"version":3,"sources":["../../src/components/DidUpdate.jsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;AAEb,IAAM,iBAAiB,GAAG,KAAK,CAAC,WAAW,CAAC;;AAC3C,gBAAe,6BAAG;AACjB,SAAO;AACN,YAAS,EAAE,EAAE;GACb,CAAA;EACD;AACD,kBAAiB,+BAAG;AACnB,MAAI,CAAC,qBAAqB,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;EACrD;AACD,qBAAoB,kCAAG;AACtB,MAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;EACrD;AACD,mBAAkB,8BAAC,SAAS,EAAE,SAAS,EAAE;AACxC,MAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;EACtE;AACD,sBAAqB,iCAAC,aAAa,EAAE,SAAS,EAAE;AAC/C,GAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,aAAa,EAAE,SAAS,CAAC,EAAE,UAAC,gBAAgB,EAAK;AACpE,SAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;GACtD,CAAC,CAAC;AACH,GAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,EAAE,aAAa,CAAC,EAAE,UAAC,aAAa,EAAK;AACjE,SAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;GAChD,CAAC,CAAC;EACH;AACD,eAAc,4BAAG;AAChB,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;AAChD,MAAM,WAAW,GAAG,SAAd,WAAW,GAAS;AACzB,UAAO,CAAC,GAAG,gBAAc,WAAW,CAAG,CAAC;GACxC,CAAC;AACF,MAAI,CAAC,QAAQ,CAAC,EAAC,SAAS,+BAAM,IAAI,CAAC,KAAK,CAAC,SAAS,IAAE,WAAW,EAAC,EAAC,CAAC,CAAC;EACnE;AACD,mBAAkB,gCAAG;AACpB,MAAI,CAAC,QAAQ,CAAC,EAAC,SAAS,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAC,CAAC,CAAC;EAC5D;AACD,OAAM,oBAAG;AACR,SACC;;;GACC;;;;IACY,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM;;IACjC;GACN;;MAAQ,OAAO,EAAE,IAAI,CAAC,cAAc,AAAC;;IAAsB;GAC1D,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI;;MAAQ,OAAO,EAAE,IAAI,CAAC,kBAAkB,AAAC;;IAAkC;GAC1G,CACL;EACF;CACD,CAAC,CAAC;;AAEH,IAAM,SAAS,GAAG,KAAK,CAAC,WAAW,CAAC;;AACnC,gBAAe,6BAAG;AACjB,SAAO;AACN,UAAO,EAAE,IAAI;GACb,CAAC;EACF;AACD,OAAM,oBAAG;;;AACR,SACC;;;GACC;;;;IAEK;GACL;;;;IAII;GACJ;;;;IACa,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,GAAG,aAAa;IACrD;GACN,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI;;MAAQ,OAAO,EAAE,mBAAM;AAAC,YAAK,QAAQ,CAAC,EAAC,OAAO,EAAC,KAAK,EAAC,CAAC,CAAA;MAAC,AAAC;;IAA0B;GACxG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI;;MAAQ,OAAO,EAAE,mBAAM;AAAC,YAAK,QAAQ,CAAC,EAAC,OAAO,EAAC,IAAI,EAAC,CAAC,CAAA;MAAC,AAAC;;IAAuB;GACpG,IAAI,CAAC,KAAK,CAAC,OAAO,IAClB,oBAAC,iBAAiB,OAChB;GAEE,CACL;EACF;CACD,CAAC,CAAC","file":"DidUpdate.js","sourcesContent":["\"use strict\";\n\nconst ListenerComponent = React.createClass({\n\tgetInitialState() {\n\t\treturn {\n\t\t\tlisteners: []\n\t\t}\n\t},\n\tcomponentDidMount() {\n\t\tthis.handleListenersChange([], this.state.listeners);\n\t},\n\tcomponentWillUnmount() {\n\t\tthis.handleListenersChange(this.state.listeners, []);\n\t},\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tthis.handleListenersChange(prevState.listeners, this.state.listeners);\n\t},\n\thandleListenersChange(prevListeners, listeners) {\n\t\t_.each(_.difference(prevListeners, listeners), (listenerToRemove) => {\n\t\t\twindow.removeEventListener(\"click\", listenerToRemove);\n\t\t});\n\t\t_.each(_.difference(listeners, prevListeners), (listenerToAdd) => {\n\t\t\twindow.addEventListener(\"click\", listenerToAdd);\n\t\t});\n\t},\n\taddNewListener() {\n\t\tconst listenerNum = this.state.listeners.length;\n\t\tconst newListener = () => {\n\t\t\tconsole.log(`Listener #${listenerNum}`);\n\t\t};\n\t\tthis.setState({listeners: [...this.state.listeners, newListener]});\n\t},\n\tremoveLastListener() {\n\t\tthis.setState({listeners: _.initial(this.state.listeners)});\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\tThere are {this.state.listeners.length} listener(s) attached\n\t\t\t\t</div>\n\t\t\t\t<button onClick={this.addNewListener}>Add listener</button>\n\t\t\t\t{this.state.listeners.length > 0 && <button onClick={this.removeLastListener}>Remove the last listener</button>}\n\t\t\t</div>\n\t\t);\n\t}\n});\n\nconst DidUpdate = React.createClass({\n\tgetInitialState() {\n\t\treturn {\n\t\t\tenabled: true\n\t\t};\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h3>\n\t\t\t\t\tDidUpdate pattern demonstration\n\t\t\t\t</h3>\n\t\t\t\t<p>\n\t\t\t\t\tThis module allows multiple listeners and are handled through the component's state.\n\t\t\t\t\t(Tip: Open the console, add some listeners and click around. Removing listeners or the\n\t\t\t\t\t component will not result in leftover handlers)\n\t\t\t\t</p>\n\t\t\t\t<div>\n\t\t\t\t\tEvents are {this.state.enabled ? \"handled\" : \"not handled\"}\n\t\t\t\t</div>\n\t\t\t{this.state.enabled && <button onClick={() => {this.setState({enabled:false})}}>Remove component</button>}\n\t\t\t{!this.state.enabled && <button onClick={() => {this.setState({enabled:true})}}>Add component</button>}\n\t\t\t\t{this.state.enabled &&\n\t\t\t\t\t<ListenerComponent\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n});\n\n"]}